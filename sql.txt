CREATE TABLE "packages" (
	"id" serial NOT NULL,
	"id_recipient" int NOT NULL,
	"tracking_code" bigint NOT NULL UNIQUE,
	"id_user" int NOT NULL,
	"price" numeric NOT NULL DEFAULT '0',
	"weight" numeric NOT NULL DEFAULT '0',
	CONSTRAINT packages_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "recipient" (
	"id" serial NOT NULL,
	"name" character varying(100) NOT NULL,
	"address" character varying(100) NOT NULL,
	CONSTRAINT recipient_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "package_info" (
	"id" serial NOT NULL,
	"tracking_code" int NOT NULL UNIQUE,
	"date" DATE NOT NULL,
	"despcription" character varying(1000) NOT NULL,
	"serial_number" bigint,
	"country_sender" character varying(100) NOT NULL,
	CONSTRAINT package_info_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "packages_recipient" (
	"id" serial NOT NULL,
	"id_recipient" int NOT NULL UNIQUE,
	"price_for_the_last_month" numeric NOT NULL,
	"weight_for_the_last_month" numeric NOT NULL,
	"limit_price" numeric NOT NULL,
	"limit_weight" numeric NOT NULL,
	"all_packages" int NOT NULL,
	CONSTRAINT packages_recipient_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "additional_payments" (
	"id" serial NOT NULL,
	"id_recipient" int NOT NULL UNIQUE,
	"payments_for_the_current_month" numeric NOT NULL,
	"payments_all" numeric NOT NULL,
	"overall_debt" numeric NOT NULL,
	"no_payments" character varying(1000) NOT NULL,
	CONSTRAINT additional_payments_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "fine" (
	"id" serial NOT NULL,
	"id_recipient" int NOT NULL UNIQUE,
	"overall_fine" numeric NOT NULL,
	"fine_packages" character varying(1000) NOT NULL,
	CONSTRAINT fine_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "payments_packages" (
	"id" serial NOT NULL,
	"id_recipient" int NOT NULL,
	"tacking_code" int NOT NULL UNIQUE,
	"payment_deadline" DATE NOT NULL,
	"days_of_delay" int NOT NULL,
	"debt" numeric NOT NULL,
	CONSTRAINT payments_packages_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "fine_packages" (
	"id" serial NOT NULL,
	"id_recipient" int NOT NULL,
	"tacking_code" int NOT NULL UNIQUE,
	"payment_deadline" DATE NOT NULL,
	"days_of_delay" int NOT NULL,
	"fine" numeric NOT NULL,
	CONSTRAINT fine_packages_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "user" (
	"id" serial NOT NULL UNIQUE,
	"login" character varying(100) NOT NULL UNIQUE,
	"password" character varying(100) NOT NULL,
	CONSTRAINT user_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



CREATE TABLE "user_credentials" (
	"id" serial NOT NULL UNIQUE,
	"first_name" character varying(100) NOT NULL,
	"last_name" character varying(100) NOT NULL,
	"created" DATE NOT NULL,
	"status" int NOT NULL,
	CONSTRAINT user_credentials_pk PRIMARY KEY ("id")
) WITH (
  OIDS=FALSE
);



ALTER TABLE "packages" ADD CONSTRAINT "packages_fk0" FOREIGN KEY ("id_recipient") REFERENCES "recipient"("id");
ALTER TABLE "packages" ADD CONSTRAINT "packages_fk1" FOREIGN KEY ("id_user") REFERENCES "user"("id");


ALTER TABLE "package_info" ADD CONSTRAINT "package_info_fk0" FOREIGN KEY ("tracking_code") REFERENCES "packages"("tracking_code");

ALTER TABLE "packages_recipient" ADD CONSTRAINT "packages_recipient_fk0" FOREIGN KEY ("id_recipient") REFERENCES "recipient"("id");

ALTER TABLE "additional_payments" ADD CONSTRAINT "additional_payments_fk0" FOREIGN KEY ("id_recipient") REFERENCES "recipient"("id");

ALTER TABLE "fine" ADD CONSTRAINT "fine_fk0" FOREIGN KEY ("id_recipient") REFERENCES "recipient"("id");

ALTER TABLE "payments_packages" ADD CONSTRAINT "payments_packages_fk0" FOREIGN KEY ("id_recipient") REFERENCES "recipient"("id");
ALTER TABLE "payments_packages" ADD CONSTRAINT "payments_packages_fk1" FOREIGN KEY ("tacking_code") REFERENCES "packages"("tracking_code");

ALTER TABLE "fine_packages" ADD CONSTRAINT "fine_packages_fk0" FOREIGN KEY ("id_recipient") REFERENCES "recipient"("id");
ALTER TABLE "fine_packages" ADD CONSTRAINT "fine_packages_fk1" FOREIGN KEY ("tacking_code") REFERENCES "payments_packages"("tacking_code");


ALTER TABLE "user_credentials" ADD CONSTRAINT "user_credentials_fk0" FOREIGN KEY ("id") REFERENCES "user"("id");

